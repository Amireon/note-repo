本章重点分析I/O设备与主机交换信息的三种控制方式（程序控制、中断和DMA）及其相应的接口功能和组成，对几种常用的I/O设备也进行了简单介绍.

章节总览
![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301311709891.png)


## 5.1 I/O系统基本概念
### 1.I/O系统演变过程
**1.早期**
特点：CPU和I/O串行工作，分散连接
I/O控制方式: 程序查询方式，

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301311613514.png)

**2.接口和DMA阶段**
特点：CPU和I/O接口并行工作，总线连接
I/O控制方式: 
- 中断控制方式: 只有I/O设备准备就绪并向CPU发送中断请求才予以响应，CPU与I/O不能绝对并行，
- DMA方式: 直接存储器存取(Direct Memory Access), 主存与I/O设备之间有一条直接数据通路，当主存与I/O设备交换数据时，无需发送中断请求，常用于微机实现高速I/O设备与主存的数据交换

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301311614278.png)

**3.具有I/O通道结构的阶段**
特点: 在大中型计算机系统中，采用I/O通道方式交换数据
在系统中设有通道控制部件，每个通道连接若干外设，主机在执行I/O命令时，只需启动有关通道，通道将执行通道程序，完成I/O操作，而CPU不参与直接管理

**4.具有I/O处理机的阶段**
特点: I/O处理机又被称为外围处理机


### 2.I/O系统基本组成
一般来说，I/0系统由I/O软件和I/O硬件两部分构成

**1.I/O软件**
通常采用I/O指令和通道指令实现CPU和I/O设备的信息交换
- I/O指令：CPU指令的一部分，操作码+命令码+设备码
- 通道指令：通道自身的指令，指出数组的首地址、传送字数、操作命令;存放在主存中;位数一般较长

**2.I/O硬件**
包括外部设备、设备控制器和接口、I/O总线等

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202212101027751.png)

### 3.I/O设备编址方式
**1.统一编制**
- 把I/O地址当做存储器地址的一部分，用统一的**访存指令**访问I/O端口，又称存储器映射方式
- 区分方式: 依靠不同的**地址码**区分内存和I/O设备，I/O地址要求相对固定在地址的某部分。
- **优点**：不需要专门的输入/输出指令，可使CPU访问I/O的操作更灵活、更方便，还可使端口有较大的编址空间
- **缺点**：端口占用了存储器地址，减少主存容量；利用存储器编址的I/O设备进行数据输入/输出操作，执行速度较慢

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202212151517206.png)


**2.独立编址（不统一编址）**
- I/O端口地址与存储器地址无关，CPU设置**专门的I/O指令**访问端口，又称I/O映射方式
- 区分方式: 依靠不同的指令区分内存和I/O设备
- **优点**：I/O指令与存储器指令有明显区别，程序编制清晰
- **缺点**：需要额外I/O控制指令；输入/输出指令少，一般只能对端口进行传送操作，尤其需要CPU提供存储器读/写、I/O设备读/写两组控制信号，增加了控制的复杂性

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202212151517208.png)


**小结**

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202212101049757.png)

### 4.I/O设备的控制方式
五种: 程序查询方式，程序中断方式，DMA方式，I/O通道方式，I/O处理机方式

**1.程序查询方式** 
- I/O接口内置一个能反映I/O设备是否准备就绪的状态标记
- CPU 和 I/O 串行工作，踏步等待
- 按"字"读取I/O设备数据，经CPU送给主存
- 一旦启动I/O设备，CPU便不断查询I/O设备的准备情况，无法执行原程序

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301311647315.png)


**2.程序中断方式**
只有当I/O设备准备就绪并向CPU发送中断请求后，CPU才响应I/O设备

- 当I/O设备处于准备状态时，CPU不执行I/O指令
- 当I/O设备将要与主机交换信息时，CPU暂停现行程序，通过中断服务程序

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301311651822.png)

**3.DMA方式**
- 主存与I/O之间有一条直接数据通道
- 不中断现行程序，CPU和I/O并行工作
- 周期挪用: 一个存取周期
- 若同时访问主存，CPU让渡访问权

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301311653494.png)


**4.三种方式的CPU工作效率比较**
- 程序查询方式：串行，无中断，
- 程序中断方式: 串行，有中断，
- DMA方式：并行，无中断，

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301311656899.png)


## 5.2 I/O接口

为什么要设备接口？
- 实现设备的选择
- 实现数据缓冲，来速度匹配
- 实现数据串-并格式的转换
- 实现电平转换
- 传送控制命令
- 反映设备的状态（“忙”、“就绪”、“中断请求”）

### 1.接口的功能和组成







![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202212101119980.png)



## 5.3程序查询方式


## 5.4程序中断方式


## 5.5DMA方式

DMA接口的功能和组成
向CPU申请DMA传送
处理总线控制权的转交


本章考研大纲
（一）I/O系统基本概念
（二）外部设备
1. 输入设备：键盘、鼠标
2. 输出设备：显示器、打印机
3. 外存储器：硬盘存储器、磁盘阵列、光盘存储器
（三）I/O接口（I/O控制器）
1. I/O接口的功能和基本结构
2. I/O端口及其编址
（四）I/O方式
1. 程序查询方式
2. 程序中断方式
中断的基本概念；中断响应过程；中断处理过程；多重中断和中断屏蔽的概念
3. DMA方式
DMA控制器的组成；DMA传送过程
4. 通道方式