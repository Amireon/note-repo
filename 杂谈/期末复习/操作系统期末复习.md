[友情链接]( https://www.yuque.com/7hao/juangou/pdxf1uqddc651eif): https://www.yuque.com/7hao/juangou/pdxf1uqddc651eif

题型组成
- 选择题：10 * 2' = 20
- 判断题：10 x 1' = 10
- 名词解释: 7 x 2' = 14
- 简答：4 * 5‘ = 20
- 计算题：6 * 6 = 36

# 复习刚要
## 第一章 操作系统概述

操作系统的定义
发展过程：单道、多道、分时、实时
基本特性：共享、并发、虚拟、异步
主要功能：


## 第二章 进程的描述与控制
前趋图

程序执行方式：顺序、并发
- 顺序：顺序、封闭、可再现性
- 并发：简单、非封闭、不可再现

原语，三大状态（四种转换）

进程同步基本原则，制约关系
- 空闲让进：当临界资源空闲时，允许一个进程进入临界区。
- 忙则等待：临界资源正被访问时，其它进程必须等待，以保证对临界资源的互斥访问。
- 有限等待：应保证进程能在有限时间内能进入自己的临界区，以免陷入“死等”
- 让权等待：如果进程不能进入自己的临界区、应立即释放处理机，以免陷入“忙等”

制约关系
- 间接制约：竞争——独占分配到的部分或全部的共享资源，互斥
- 直接制约：协作——等待来自其他进程的信息，同步

PV操作
消息传递机制、管道、共享存储方式
进程、线程的责任分配
- 进程：除CPU外的系统资源的分配单元
- 线程：处理机的分配单元

## 第三章 处理机调度与死锁
处理机调度层次
- 高级调度，作业调度
- 中级调度，内存调度
- 低级调度，进程调度

时间片轮转调度算法

- 最早截止时间优先算法（DEF）
- 最低松弛度优先算法（LLF）：自到达时刻开始可以等待调度的时间

调度算法
- 周转时间：作业完成时间 - 作业提交是假
- 带权周转时间： 作业周转时间 / 作业实际运行时间
- 响应比：1 + 等待时间 / 运行时间

死锁概念、四个必要条件、处理方法、产生原因（竞争资源）
- 定义：多个进程竞争资源而互相等待，若无外力作用，这些进程将无法向前推进
- 产生原因：系统资源的竞争和进程推进顺序非法
- 四个必要条件：
- 处理方法：

## 第四章 存储器管理
存储器层次结构
装入
内存分配存储管理方式
分页
分段


## 第五章 虚拟存储器
- 定义：
- 实现支持：页表机制、缺页中断结构、地址变换机构
- 实现方法：请求分页、请求分段、请求段页式
抖动


## 第六章 外部设备
I/O系统的功能、模型，（接口），层次划分
控制方式
设备独立性

磁盘调度

设备分配过程
SPOOLing

## 第7章 文件管理

文件目录：单级、两级、树形
文件共享：有向图、符号链
存取控制权限


## 第8章 磁盘管理
外存的组织方式：FAT、三种组织方式
文件存储管理：空闲表、链，位示图，成组


# 习题

**名词解释**

- 脱机I/O：程序和数据的输入和输出都在外围机的控制下完成，在脱离主机的情况下进行
- 前趋图：前趋图是有向无环图，用于描述进程执行的先后顺序
- 进程：进程是进程实体的运行过程，是系统进行资源分配和调度的一个独立单位。
- 并发：并发指两个或多个事件在同一时间间隔内发生。操作系统的并发性是指计算机系统中同时存在多个运行的程序。
- 进程同步：多个相关进程协调执行次序，使并发执行的进程能共享系统资源，并相互合作，使程序的执行具有可再现性。
- 临界资源：在一段时间内只允许一个进程访问的资源，称为临界资源或独占资源。把访问临界资源的那段代码叫临界区。
- 虚拟存储器：指具有请求调入、置换功能，从逻辑上扩充内存容量的存储器系统。
- 请求分页系统：在分页系统的基础上，添加请求调页、页面置换功能的页式虚拟存储系统
- 请求分段系统：在分段系统的基础上，添加请求掉段、分段置换功能的段氏虚拟存储系统
- 抖动：频繁的页面调度行为，如刚换出的页面马上换入主存，刚换入的页面马上换出主存
- 工作集：某段时间间隔内，进程要访问的页面的集合

**问答**

1. 操作系统的定义是什么？
- 计算机系统中的一个大型的**系统软件**
- 它用来管理和控制计算机系统中的**全部软、硬件资源**
- 操作系统用于合理地组织计算机的工作流程
- 操作系统为用户应用程序的运行提供一个友好的界面和良好的工作环境。

2. 操作系统的基本功能有哪些？
- 处理机管理
- 存储器管理
- 设备管理
- 文件管理

3. 进程和程序有什么不同？为什么需要进程？
- 进程是动态的，程序是静态的：程序是有序代码的集合；进程是程序的执行；
- 进程是暂时的，程序是永久的：进程是一个状态变化的过程，程序可长久保存
- 进程与程序的组成不同：进程的组成包括程序、数据和系统数据及资源

引入进程的目的
- 进程：使多道程序更好地并发执行，提高资源利用率和系统吞吐量
- 线程：减小程序在并发执行时所付出的时空开销

4. 进程同步应遵循的基本准则是什么？
- 空闲让进：当临界资源空闲时，允许一个进程进入临界区。
- 忙则等待：临界资源正被访问时，其它进程必须等待，以保证对临界资源的互斥访问。
- 有限等待：应保证进程能在有限时间内能进入自己的临界区，以免陷入“死等”
- 让权等待：如果进程不能进入自己的临界区、应立即释放处理机，以免陷入“忙等”

5. 虚拟存储器的特征
- 多次性
- 对换性
- 虚拟性
- 离散性


## 第二章 PV操作

1. 有一计算进程和打印进程，它们共享一个单缓冲区，计算进程不断地计算出一个整型结果并将它放入单缓冲区，打印进程则负责从单缓冲区中取出每一个结果进行打印，请用信号量来实现它们之间的同步关系。
> 缓冲区不受互斥信号量限制：其实是生产者不必等待消费者消费，一直生产即可

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141049388.png)

2. 用信号量解决“过独木桥”问题：同一方向的行人可连续过桥，当某一方向有人过桥时，另一方向的行人必须等待；当某一方向无人过桥时，另一方向的行人可过桥。
![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141104951.png)

```c
// 两侧逻辑一致，可以使用一个表达
int count = 0;    // 过桥人数
semaphore mutex = 1;      // 互斥修改count
semaphore bridge = 1;     // 互斥过桥

void Process() {
	P(mutex);
	if(count == 0) P(bridge);
	count++;
	V(mutex);
	过桥;
	P(mutex);
	count--;
	if(count == 0) V(Bridge);
	V(mutex);
}
```


3. 设公共汽车上，司机和售票员的活动分别是：

   司机：     启动车辆                售票员：    上乘客
             正常行车                           关车门
             到站停车                           售票
                                                       开车门
                          下乘客

在汽车不断地到站，停车，行使过程中，这两个活动有什么同步关系？利用信号量机制实现同步。

同步关系为：售票员关车门后，向驾驶员法开车信号，司机收到开车信号后启动车辆，在汽车正常刑事过程中国售票员售票，到站时驾驶员停车，售票员在车停后开门让乘客上下车。
司机启动车辆与售票员关门同步，售票员开门动作与司机停车同步。

```c
semaphore S1 = 0; // 是否允许启动
semaphore S2 = 0; // 是否允许开车门

void driver() {
	while(1) {
		P(S1);    // 等待开车
		启动; 
		行驶; 
		停车;
		V(S2);    // 告知开门
	}
}

void conductor() {
	while(1) {
		关门;
		V(S1);    // 告知发车
		售票;
		P(S2);    // 等待开门
		开门;
		上下乘客;
	}
}
```


3. 何谓“忙等”？它有什么缺点？
![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141055701.png)


4. 进程之间存在着哪几种制约关系？各是什么原因引起的？下列活动分别属于哪种制约关系？
(1)若干同学去图书馆借书；
(2)两队举行篮球比赛；
(3)流水线生产的各道工序；
(4)商品生产和社会消费；

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141056629.png)


5. PCB的作用是什么？为什么说PCB是进程存在的唯一标志？
![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141103876.png)


## 第三章 进程调度算法

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141423317.png)


![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141423266.png)


有5个任务（A、B、C、D、E）几乎同时到达，估计他们运行时间分别为(10、6、2、4、8)分钟。其优先数分别为3、5、2、1和4，其中5设为最高优先级。对于优先级调度算法，计算其平均进程周转时间。

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141415874.png)


设有A、B、C、D、E五个进程，其到达时间分别为0、1、2、3、4，要求运行时间依次为3、6、4、5、2，采用最高响应比优先调度算法，试计算其平均周转时间和平均带权周转时间

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306141429109.png)


## 第四章

1. 简述常见的四种连续内存管理方案及其优缺点

单一连续分配
- 优点：简单，无外部碎片，无需内存保护
- 只用于单用户、单任务的操作系统，有内部碎片
固定分区分配
- 适用于多道程序设计，无外部碎片
- 进程无法共享主存区，存储空间利用率低
动态分区分配
- 
动态可重定位分区分配
- 

2. 带快表的分页系统是如何实现逻辑地址到物理地址的转换的？

3. 某分页系统，主存容量为64K，页面大小为1K，一个4页大的作业，各页被分配到主存的2，4，6，7块中。
（1）将十进制的逻辑地址 2000和4500转换成对应的物理地址。
（2）将十六进制的逻辑地址 00ACH和02BEH转换成对应的物理地址。
（3）如果访问内存需要1μs，有效访问时间为多少?
（4）如果加一快表，且假定在快表中找到页表的几率高达90%，则有效访问时间又是多少（假定查快表需花的时间为0）？

4. 某计算机主存分页内存管理方式，逻辑地址是32位，页内偏移量占12位。页表项大小为4字节，请问，则页的大小是多少字节？页表最大占用多少字节？内存最大容量是多少？

5. 在请求调页的动态分页系统中，一个页面访问次序为：3，5，2，1，4，3，2，1，5，2，1，4，3，5。 当分配给该作业的物理块数为4时请：
（1）若采用LRU算法，给出该作业在内存的页面变换情况及缺页次数
（2）若采用FIFO算法，给出该作业在内存的页面变换情况及缺页次数
（3）若采用OPT算法，给出该作业在内存的页面变换情况及缺页次


## 第五章

1. 现有一个请求调页系统，页表保存在寄存器中，访问页表的时间可忽略不计。处理一个缺页中断需要8ms，内存存取时间为1μs ，设定缺页率为p，则系统的有效存储时间是多少？

- 不缺页：访问页表 + 访问主存 = (1 - p) * (0 + 1us) 
- 缺页：页表 + 缺页中断 + 内存 = p * (0 + 8ms + 0 + 1us)

2. 现有一个请求调页系统，页表保存在寄存器中。若有一个被替换的页未被修改，则处理一个缺页中断需要8ms，若被替换的页已经被修改，则处理一个缺页中断需要20ms，内存存取时间为1μs ，访问页表的时间可忽略不计。假定70%被替换的页被修改过，设定缺页率为p，则系统的有效存储时间是多少？

页表保存在寄存器中，访问页表的时间为0
- 不缺页，不替换，只需访存，时间为(1 - p) * 1us
- 缺页，未被修改 + 被修改 = p * [0.3 * (8ms + 1us) + 0.7 * (20ms + 1us)] = p * (1μs + 0.7 * 20ms + 0.3 * 8ms)
系统的有效存储时间=不缺页 + 缺页

3. 考虑一个请求调页系统，它采用全局置换策略和平均分配内存块的算法（若有m个内存块和n个进程，则每个进程分得m/n个内存块）。如果在该系统中测得如下的cpu和对换盘利用率，请问是否用增加多道程序的进程个数来增加cpu的利用率？为什么？
	
	![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306171858817.png)


4. 在一个请求分页系统中，假设系统分配给某进程的物理块数为3，开始时内存为空，执行如下访问页号序列：  1，2，3，4，1，2，5，1，2，3，4，5  试说明采用先进先出(FIFO) 、最近最少使用（LRU）和最佳置换算法(OPT)进行页面置换时，缺页次数各是多少
	
	FIFO: 9次   ；LRU：10次 ； OPT：7次   

5. 某进程执行时的页面走向为1 2 3 4 1 2 5 1 2 3 4 5，分别画出其分配物理块为3的最佳置换算法的置换图。

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306171859026.png)

6. 某进程执行时的页面走向为1 2 3 4 1 2 5 1 2 3 4 5，分别画出其分配物理块为3和4的FIFO算法的置换图。
	![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306171900453.png)


8. 在请求分页管理系统中，一个作业要依次访问如下页面：3 4 2 1 4 3 1 4 3 1 4 5，采用LRU置换算法求出访问过程中发生的缺页中断的次数及缺页率。设分给作业的存储块数为3.
	![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306171901042.png)

9. 在请求分页管理系统中，一个作业要依次访问如下页面：2 3 2 1 5 2 4 5 3 2 5 2，设分给作业的存储块数为3。若用最佳置换算法，先进先出，LRU置换算法求出访问过程中发生的缺页次数及缺页率。
	![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306171902777.png)
	![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306171902810.png)

10. 某计算机的页式虚拟存储器管理中采用长度为32字节的页面，页表内容如下表所示，求当CPU程序按下列二进制虚拟字地址访存时产生的实际字地址：00001101 ，10000000，00101000
	![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306171903807.png)





## 第六章

1. 简述I/O系统的6大基本功能。

2. 简述常见的四种I/O控制方式

3. 什么是通道？引入通道的原因是什么？

4. 什么是设备的独立性？为什么需要设备独立性。

5. 简述用户发起对逻辑I/O设备的操作请求后，独占设备的分配过程。

6. 以假脱机打印机为例简述SPOOLING系统的工作过程

7. 假设一个可移动磁头的磁盘具有200个磁道，其编号为0~199，当前它刚刚结束了125道的存取，正在处理149道的服务请求，假设系统当前Ｉ／Ｏ请求序列为：88, 147, 95, 177, 94, 150, 102, 175, 138。对以下的磁盘Ｉ／Ｏ调度算法，计算总的磁道移动数。
（1）最短寻道时间优先（SSTF） 
（2）扫描法（ＳＣＡＮ）

8. 某移动臂磁盘的柱面由外向里顺序编号，假定当前磁头停在100号柱面且移动臂方向是向里的，请求访问磁盘序列为：190，10，80，125，30，160，45，140，请问：
（1）计算扫描算法的平均寻道时间
（2）计算循环扫描算法的平均寻道时间

![image-202306132248773](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306132248773.png)


![image-20230613224931230](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306132249290.png)


## 第七章
1. 文件目录管理的要求

- 按名存取
- 提高对目录的检索速度
- 文件共享
- 允许文件重名



## 第八章

对于1.2MB的软盘，每个盘块的大小为512B，该软盘有（2.4K）个盘块，有（2.4K）个FAT表项，若每个FAT表项占12bit，则该FAT共占（3.6KB）的存储空间

对于FAT12来说，最多允许有（2的12次方即4K）个表项，如果一个盘块为512B，一个磁盘的最大容量为（4K * 512B = 2MB），如果以簇进行划分，四个盘块为一簇磁盘容量可达（8MB）



1. 假定盘块的大小为1KB，硬盘的大小为512MB(不考虑分卷)，采用显示链接分配方式时，（系统以盘块为分配单位，其中FAT只能应用现有技术），其FAT需要占用多少存储空间？


2. 某系统中磁盘的每个盘块大小为1KB，外存分配方法采用索引分配方式中的混合分配方式，其中索引节点中直接地址4项，一次间接地址2项，二次间接地址1项，每个盘块号占用4个字节，请问该系统中允许的文件最大长度是多少？


3. UNIX系统采用空闲块成组链接的方法管理磁盘空闲空间，图中是采用UNIX操作系统的某系统的空闲块成组链接示意图，问此时若一个文件A需要5个盘块，则系统会将哪些盘块分配给它？若之后有个文件B被删除，它占用的盘块块号为333、334、404、405、782，则回收这些盘块后专用块的内容如何？