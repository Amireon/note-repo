- 填空选择60
- 简答10
- 计算30

# 1.概述

互联网：边缘部分与核心部分

计算机网络采用的通信方式：客户-服务器方式和对等连接方式

计算机网络分为广域网WAN、城域网MAN、局域网LAN、个人区域网PAN

计算机网络的性能指标：时延

网路协议即协议，是为进行网络中的数据交换而建立的规则。计算机网络的各层及其协议的集合，称为网络的体系结构。

体系结构：


互联网分为边缘部分和核心部分
- 边缘部分进行信息处理
- 核心部分：路由器，存储转发，分组交换

- 计算机网络采用的通信时客户-服务器方式和对等连接方式P2P
- 计算机网络的类别划分：广域网WAN，城域网MAN，局与昂LAN和个人区域网PAN
- 新能指标：时延 = 发送时延 + 传播 + 处理 + 排队时延
- 网路协议及协议，是为进行网络中的数据交换而建立的规则。计算机玩过的各层及其协议的集合，称为网咯的体系结构
- 五层协议结构：应用层、传输层（TCP/UDP)、网络层（IP）、数据链路层、物理层。

简答题
- 简述分组交换的要点
- 比较电路交换、报文交换、分组交换的优缺点
- 互联网的两大组成部分的特点及其各自工作方式的特点

# 2.物理层

物理岑的任务：机械特性、电气特性、功能特性、过程特性

单工通信、半双工、全双工

传输媒体：导引型传输媒体（双绞线）

信道复用技术：频分、时分、码分、波分

# 3.数据链路层

数据链路岑使用的信道：点对点信道PPP和广播信道

数据链路层传送的协议数据单元是帧， 基本问题：封装成帧，透明传输，差错检测

循环冗余校验CRC，得到FCS的计算郭晨

PPP特点：简单，只检测不纠错，不进行流量控制。填充方法，实现透明传输：字节、零比特

局域网的优点：广播；便于系统的扩展和演变；提高了系统的可靠性、可用性和生存性

载波监听多点接入CSMA/CD：先发送，边发送，边监听

网络拓扑结构，星型，总线型，环形，集线器工作在物理层，集线器在物理层拓展以太网

MAC，48位长，以太网的硬件地址

交换式集线器（第二层交换机），工作在数据链路层

数据链路层中的链路控制包含哪些功能？试讨论数链路层提供可靠传输的优缺点。


# 4.网络层

TCP/IP体系中的网路层向上值提供简单灵活的、无连接的、静最大努力交付的数据报服务。网络层不提供可靠服务。进程之间的可靠通信由运输层负责。

MAC地址是数据链路层和物理层使用的地址，IP地址是网络层和以上各层使用的地址，是逻辑地址。在数据链路层看不见数据报的IP地址。

IP数据报=首部加数据。首部的前部固定20B。

IP首部中的生存时间字段给出了IP数据报在互联网中能进过的最大路由器数。

ARP把IP解析为MAC，解决同一个局域网上的主机或路由器的IP地址和MAC地址的映射问题。ARP高速缓存

路由选择协议：内部网关协议（自治系统内部的路由选择协议）RIP和OSPF，外部网关协议BGP-4

RIP是基于距离向量的路由选择协议。特点：按固定时间间隔，与相邻路由器，交换全部路由信息，最大距离为15

ICMP是IP层协议。ICMP报文作为IP数据报的数据，作用：报告差错情况和报告异常情况


# 5.传输层

运输层提供进程间的逻辑通信。运输层屏蔽了网络的细节

网络层为主机提供逻辑通信，而运输层为应用进程之间提供端到端的逻辑通信

运输层的TCP和UDP，复用和分用，检错。

运输层使用16位端口号来标志一个端口。端口号只有本地意义。

UDP的主要特点：无连接；尽最大努力；面向报文；无拥塞控制；

TCP的主要特点：面向连接；点对点；提供可靠交付；全双工；面向字节流

TCP的套接字：IP地址：端口号

停止等待协议能够在不可靠的传网络上实现可靠的通信。每发送一个分组就要停止等待ACK

TCP报文首部前20B固定

TCP首部中的确认后使期望收到对方下一个报文段的第一个数据字节的序号。N：前N-1个字节已正确收到

TCP首部中的窗口字段：允许对方发送的数据量，动态变化

流量控制是端到端的问题：控制发送方的发送速率

拥塞控制：拥塞窗口cwnd，发送窗口 = min(拥塞窗口，接收窗口)

TCP的拥塞控制：慢开始、拥塞避免、快重传、快恢复

# 6.应用层


---

# 第一章

## 书后习题详解

**题目1-2 ：试简述分组交换的要点。**

分组交换采用了**存储转发**技术。把**报文**等分成若干数据段，每个数据段加入控制信息组成的首部，构成若干分组。分组首部包含了目的地址和原地址等重要控制信息，每个分组可以在互联网中独立地选择传输路径。

**题目：1-3试从多个方面比较电路交换，报文交换和分组交换的主要优缺点。**

- 电路交换：事先建立连接，分配资源，资源利用率相对较低，延迟低，但是可靠性高，不适合突发数据传输。
- 报文交换：无须预约传输带宽，配置灵活，延时较高，可靠性一般。
- 分组交换：分组存储转发数据，灵活迅速，资源利用率高，延时较高，可靠性高。

**题目1-12：因特网的两大组成部分（边缘部分与核心部分）的特点是什么？它们的工作方式各有什么特点？**

- 边缘部分：由各主机构成，用户直接进行信息处理和信息共享;低速连入核心网。
- 核心部分：由各路由器连网，负责为边缘部分提供高速远程分组交换，核心工作是**存储转发**。

**题目1-17：收发两端之间的传输距离为1000km，信号在媒体上的传播速率为2×10^8m/s 。试计算以下两种情况的发送时延和传播时延：**
- （1） 数据长度为10^7bit，数据发送速率为100kb/s。
- （2） 数据长度为10^3bit,数据发送速率为1Gb/s。
从上面的计算中可以得到什么样的结论？

>发送时延 = 数据长度 / 数据发送率
>传播时延 = 传输距离 / 传播速率

（1）发送时延：ts=107 / 105 = 100s
传播时延：tp=106 / ( 2×108) = 0.005s

（2）发送时延ts =103 / 109 =1µs
传播时延：tp=106 / ( 2×108)=0.005s

结论：若数据长度大而发送速率低，则在总的时延中，发送时延往往大于传播时延。但若数据长度短而发送速率高，则传播时延就可能是总时延中的主要成分。


## 考点补充

##### 计算机通信

计算机通信的方式主要有两种：
（1）客户服务器方式

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271415702.png)

客户/服务器方式所描述的是**进程之间服务和被服务**的关系。
在这种方式中，主机被分为两类：
-   **客户端（主机A）**：请求服务的一方
-   **服务端（主机B）**：提供服务的一方

（2）对等连接方式

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271415316.png)

在对等连接方式下，不再像客户-服务器方式一样，区分客户端和服务端，**主机和主机之间可以平等的连接通信。**
对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的每一个主机既是客户又是服务器。

##### 网络的划分

一般按照范围进行划分：

**类别**

**作用范围或距离**

**广域网** **WAN**

**(Wide Area Network)**

通常为几十到几千公里。有时也称为远程网(long haul network)。是互联网的核心部分。

**城域网** **MAN**

**(Metropolitan Area Network)**

作用范围一般是一个城市，作用距离约为 5~50 公里。

**局域网** **LAN**

**(Local Area Network)**

局限在较小的范围（如 1 公里左右）。通常采用高速通信线路。

**个人区域网** **PAN**

**(Personal Area Network)**

范围很小，大约在 10 米左右。有时也称为无线个人区域网 WPAN (Wireless PAN)。

记住这里的大小排序：**WAN > MAN > LAN > PAN**

##### 计算机网络中的常用性能指标

**指标**

**描述**

- 速率：数据的**传送速率**
- 带宽：网络中某通道传送数据的能力
- 吞吐量：单位时间内通过某个网络的**实际数据量**
- 时延：数据从一端传送到另一端所需要的时间
- 时延带宽积：`**时延带宽积**`就是**传播时延 * 带宽**，`时延带宽积`反映了**停留在管道中数据量的大小**
- 往返时间RTT：表示**从发送方发送完数据，到发送方收到来自接收方的确认**总共经历的时间

利用率
-   信道利用率：某信道有百分之几的时间是被利用的（有数据通过）
-   网络利用率：全网络的信道利用率的加群平均值

详细参见：

此处为语雀内容卡片，点击链接查看：[https://www.yuque.com/7hao/juangou/ahau4y9inroxk33b#fi0hF](https://www.yuque.com/7hao/juangou/ahau4y9inroxk33b#fi0hF)

##### 网络协议

**💡网络协议** (network protocol)，简称为协议，是为进行网络中的数据交换而建立的**规则、标准或约定**。

计算机体系结构讨论的实际上就是协议。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271415767.png)

重点记住（c）的五层协议体系结构。

为什么要这样分层？

很简单，因为针对于**不同业务**，分层可以很好的做好**封装**，每个模块之间就无需关心其他模块的业务是什么，怎么实现其他的业务，只需要关注自身即可。

优点：**各层之间是独立的；灵活性好；结构上可分割开；易于实现和维护能促进标准化工作**。

缺点：**有些功能会重复出现，因而产生了****额外开销**。

五层协议中各层的主要功能：

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416533.jpeg)

  

# 第二章

## 书后习题详解

**题目2-1**: 物理层要解决哪些问题？物理层的主要特点是什么？

解决的问题：
- 确定传输媒体接口的有关特性，比如机械特性，电气特性等
- 如何传输数据流
- 屏蔽传输媒体和通信手段的差异
- 在两个相邻系统之间唯一地标识数据电路

主要特点：
- 传输媒介多样
- 透明传输
- 比特同步

**题目2-5**：物理层的接口有哪几个方面的特性？个包含些什么内容

- 机械特性:明接口所用的接线器的形状和尺寸、引线数目和排列、固定和锁定装置等等。
- 电气特性:指明在接口电缆的各条线上出现的电压的范围。
- 功能特性:指明某条线上出现的某一电平的电压表示何意。
- 过程特性:说明对于不同功能的各种可能事件的出现顺序。

**题目2-6**: 数据在信道重的传输速率受哪些因素的限制？信噪比能否任意提高？香农公式在数据通信中的意义是什么？“比特/每秒”和“码元/每秒”有何区别？

- 数据在信道中的传输速率受到**带宽和信噪比**等因素的限制。
- 信噪比不能任意提高。
- 香农公式的意义:只要信息传送速率低于信道的极限信息传输速率,就一定存在某种办法来实现无差错的传输。
- 比特/s是信息传输速率的单位码元传输速率也称为调制速率、波形速率或符号速率。一个码元不一定对应于一个比特。
- 比特/每秒 = 码元 / 每秒 * 比特数

**题目2-9**：用香农公式计算一下，假定信道带宽为3100Hz，最大信道传输速率为35Kb/ｓ，那么若想使最大信道传输速率增加60%，问信噪比Ｓ/Ｎ应增大到多少倍？如果在刚才计算出的基础上将信噪比Ｓ/Ｎ再增大到十倍，问最大信息速率能否再增加20%？

**香农公式**：$C = W log_{2}(1+S/N)$
- C：信息的**极限（最大）传输速率**
- W：信道的带宽 (Hz)
- S ：为信道内所传信号的平均功率
- N：为信道内部的高斯噪声功率。

（1）由公式得：35000b/s=3100 * log2(1+S/N)
S/N=2 350 / 31 -1 ≈ 2503
如果信道传输速率增加60%，改变后的速率为：35Kb/s * (1+0.6)=56Kb/s
此时 S/N'=2 560 / 31 -1 ≈ 274133
所以此时信噪比S/N的应该增大(2 560 / 31 -1) / (2 35000 / 31 -1) ≈ 109倍

（2）在原来的基础上提升十倍S/N可得
C’=3100 * log2(1+10 * 2 560 / 31 -1) ≈ 66297 bit/s
C’/56Kb/s = 118%
此时信息速率只能提升18%，所以不能

注意：信道传输速率中的`1k = 1000 ≠ 1024`

**题目2-13**：为什么要使用信道复用技术？常用的信道复用技术有哪些？

- 为了通过共享信道,最大限度提高信道利用率。
- 频分、时分、码分、波分。

详细参见：[信道复用](https://www.yuque.com/7hao/juangou/yvlvoo77xvtnuo1c#QLg7Z)

**题目2-16**：共有4个站进行码分多址通信。4个站的码片序列为
- A：（－1－1－1＋1＋1－1＋1＋1）
- B：（－1－1＋1－1＋1＋1＋1－1）
- C：（－1＋1－1＋1＋1＋1－1－1）
- D：（－1＋1－1－1－1－1＋1－1）
现收到这样的码片序列S：（－1＋1－3＋1－1－3＋1＋1）。
问哪个站发送数据了？发送数据的站发送的是0还是1？

把所有的码片序列和`S`进行向量积的操作，其结果在除以**码片序列的位数**，这里就是8。
- 得到的结果为`1`表示发送的数据是`1`
- 得到的结果为`-1`表示发送的数据是`0`
- 得到的结果为`0`表示没有发送数据

- S•A=（＋1－1＋3＋1－1＋3＋1＋1）／8=1， A发送1
- S•B=（＋1－1－3－1－1－3＋1－1）／8=－1， B发送0
- S•C=（＋1＋1＋3＋1－1－3－1－1）／8=0， C无发送
- S•D=（＋1＋1＋3－1＋1＋3＋1－1）／8=1， D发送1

详细参见：[码分复用](https://www.yuque.com/7hao/juangou/yvlvoo77xvtnuo1c#HG1Mm)

## 考点补充

##### 信道相关概念

-   **单向通信（单工通信）**：只能有**一个方向**的通信，没有反方向的交互。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416455.png)

-   **双向交替通信（半双工通信）**：通信的**双方都可以发送信息**，但双方**不能同时发送**（当然也就不能同时接收）。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416198.png)

-   **双向同时通信（全双工通信）**：通信的双方可以**同时****发送和接收信息**。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416039.png)

要求会更久通信方式判断是哪一种通信类型.

##### 传输媒体

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416474.jpeg)

##### 多径效应

基站发出的信号可以经过多个障碍物的数次反射，从多条路径、按不同时间等到达接收方。多条路径的信号叠加后一般都会产生**很大的****失真**，这就是所谓的**多径效应**。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416535.png)

信号从 1→2 和 3→4→5→6 两条路径到达手机。

# 第三章

## 书后习题详解

**题目3-2**：数据链路层中的链路控制包括哪些功能?试讨论数据链路层做成可靠的链路层有哪些优点和缺点。

（1）功能：
- 链路管理
- 帧界定
- 流量控制
- 封装成帧
- 差错检测
- 透明传输

（2）优缺点：
- 优点：可靠性高，数据安全，能够自动重传
- 缺点：增加了额外开销，复杂度增加，传输效率降低

**题目3-3：**网络适配器的作用是什么?网络适配器工作在哪一层?

作用：
- 进行数据串行传输和并行传输的转换
- 实现以太网协议

网络适配器工作在TCP/IP协议中的网络接口层（OSI中的数据链路层和物理层）

题目3-6：PPP协议的主要特点是什么？为什么PPP不使用帧的编号？PPP适用于什么情况？为什么PPP协议不能使数据链路层实现可靠传输

- 简单、封装成帧、透明新、支持多种网络层协议、支持多种类型链路;
- 因为帧编号是为了出错的时候可以有效重传，而PPP并不需要实现可靠传输。
- 适用于线路质量不太差的情况。
- PPP 协议只保证传输内容无差错，由于没有编号和确认机制，所以不保证帧丢失，帧失序等问题。

**题目3-7**：要发送的数据为`1101011011`。 采用 CRC 的生成多项式是$P(X)=X^4+ X+1。$
试求应添加在数据后面的余数。
若要发送的数据在传输过程中最后一个 1变成了 0，即变成了 `1101011010`，问接收端能否发现？
若要发送的数据在传输过程中最后两个 1都变成了 0，即变成了`1101011000`，问接收端能否发现？
采用 CRC 检验后，数据链路层的传输是否就变成了可靠的传输？

CRC：点击链接查看：[https://www.yuque.com/7hao/juangou/mw8a7ttq4x7714c1#a5pqu](https://www.yuque.com/7hao/juangou/mw8a7ttq4x7714c1#a5pqu)

采用 CRC 的生成多项式是P8=X4+X+1，用二进制表示就是P=10011,P的各位表示的就是P(X)各项的系数：
现在除数是**5位**，因此在数据后面添加 **4个0**就得出**被除数**（如图T3-07(a)所示）。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416959.jpeg)

除法运算得出的余数 R就是应当添加在数据后面的检验序列：`CRC=1110`。最终发送的数据为`1101011011 1110`。

② 现在要发送的数据在传输过程中最后一个1变成了 0，即`1101011010`。把检验序列 `1110`接在数据 `1101011010` 的后面，下一步就是进行 CRC 检验（如图 T3-07（b)所示）。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416740.jpeg)

从图 T3-07（b)可 看出，**余数位不为零**，因此判定所接收的数据有差错。可见，这里的 CRC检验**可以发现这个差错**。

③ 若要发送的数据在传输过程中最后两个 1都变成了 0，即 1101011000。把检验序列 1110接在数据 1101011000 的后面，下一步就是进行 CRC 检验（如图 T3-07(c)所示）。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416676.jpeg)

现在**余数R不为零**，因此判定所接收的数据有差错。可见，这里的 CRC检验可以发现这个差错。

④ 采用 CRC 检验后，缺重传机制，接收端不能发现，数据链路层的传输还不是可靠的传输。

**题目3-8**：要发送的数据为101110。采用CRC生成多项式是P(X)=X3+1。试求应添加在数据后面的余数。

作二进制除法，除数为1001，被除数为10111000，余数为011（比除数少一位），
则添加在数据后面的余数为011。

**题目3-10**：PPP协议使用同步传输技术传送比特串`0110111111111100`。试问经过零比特填充后变成怎样的比特串？若接收端收到的PPP帧的数据部分是`0001110111110111110110`，问删除发送端加入的零比特后变成怎样的比特串？

- `0110111111111100`零比特填充后：`011011111**0**11111000`
- `000111011111011111**0**110`删除零比特后：`00011101111111111110`

详细参见：[https://www.yuque.com/7hao/juangou/mw8a7ttq4x7714c1#vzzgg](https://www.yuque.com/7hao/juangou/mw8a7ttq4x7714c1#vzzgg)

**题目3-18**：说明10BASE-T中的“10”、“BASE”和“T”所代表的意思。

- “10”：信号在电缆上的传输速率为10MB/s
- “BASE”：表示电缆上的信号是基带信号
- “T”：双绞线（星形网）

**题目3-27**：有10个站连接到以太网上。试计算一下三种情况下每一个站所能得到的带宽。
（1）10个站都连接到一个10Mb/s以太网集线器；
（2）10个站都连接到一个100Mb/s以太网集线器；
（3）10个站都连接到一个10Mb/s以太网交换机。

集线器的用户共享（平分）集线器带宽，交换机的用户分别独享交换机带宽。

（1）10个站都连接到一个10Mb/s以太网集线器：10 / 10 = 1Mb/s
（2）10个站都连接到一个100Mb/s以太网集线器：100 / 10 = 10 Mb/s
（3）10个站都连接到一个10Mb/s以太网交换机：10Mb/s


**题3-29：** 以太网交换机的特点？如何组成虚拟局域网?

- 实质上是一个多端口的网桥
- 主机独占传输媒体，无碰撞地传输数据
- 一个端口和一个主机就是一个碰撞月
- 使用以太网交换机将一个较大的局域网，分割成一些较小额局域网
- 虚拟局域网VLAN是由一些局域网万端构成的鱼物理位置无关的逻辑组
- 不同局域网之间无法通信，需要借助网络层（IP


**题目3-32**：假定在图3-30中的所有链路的速率仍然为100 Mbit/s，但所有的以太网交换机都换成为100Mbit/s的集线器。试计算这9台主机和两个服务器产生的总的吞吐量的最大值。为什么?

- 一个网络中无论其中有多少台主机或者服务器,如果全部接在一个集线器上,那么该网络的最大总的吞吐量就是这个集线器的最大值，即100M。
- 交换机的吞吐量可以相加，集线器吞吐量固定最大。
- 对于交换机来说，一个端口 = 一个冲突域

**题目3-33**：在图3-31中，以太网交换机有6个接口，分别接到5台主机和一个路由器。在下面的表中的“动作”一栏中，表示先后发送了4个帧。假定在开始的时候，以太网交换机的交换表是空的，试把表中的其他栏目都填写完。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416976.png)

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271459403.png)


## 考点补充

##### 传送的协议数据单元

##### 局域网

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416985.jpeg)

一个局域网就是一个**广播域**。

##### CSMA/CD协议

这一部分了解即可

此处为语雀内容卡片，点击链接查看：[https://www.yuque.com/7hao/juangou/mw8a7ttq4x7714c1#AzBaF](https://www.yuque.com/7hao/juangou/mw8a7ttq4x7714c1#AzBaF)

##### MAC地址

硬件地址又称为**物理地址，或 MAC 地址**。

IEEE 802 标准为**局域网**规定了一种 **48 位****的全球地址**（简称为地址）是指局域网上的每一台计算机中固化在**适配器的 ROM** 中的地址。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416605.png)

##### 使用集线器的星型拓扑

星形拓扑的以太网一般都采用**双绞线**，集线器是用于物理层网络的设备，也被称为“**中继器**”。它通常用于**将多个局域网或广域网的端口连接起来形成一个单一的网络部分**。集线器可以通过放大电信号和消除噪声来加强信号并扩展网络距离。

集线器有多个数据端口，**每个端口都可以连接一个计算机、服务器或其他网络设备**。当其中一个设备发送数据时，集线器将数据从该端口复制到所有其他端口，以确保所有连接的设备都能接收到相同的信息。

也就是说集线器采取的工作方式是**广播**。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416753.png)

集线器的特点：

-   使用电子器件来模拟实际电缆线的工作，因此**整个系统仍然像一个传统的以太网那样运行**。
-   使用集线器的以太网在逻辑上仍是一个总线网，各工作站使用的还是 CSMA/CD 协议，并共享逻辑上的总线。
-   很像一个多接口的转发器，**工作在物理层**。
-   采用了专门芯片，进行自适应串音回波抵消，减少了近端串音。
-   **物理上星型结构，实际上是总线型**

##### PPP的帧格式

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416678.png)

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271505985.png)


冗余码校验

##### 碰撞域

如图所示，多个小的以太网可以通过**集线器**扩展成一个**更大的以太网**。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416415.png)

在碰撞发生期间，在**共享介质的范围**内有许多其他设备也可以监听这个通信。**每个设备感知到的这一区域就是其****碰撞域****（又叫****冲突域****）**，即该设备所在的物理网络拓扑中与该设备直接相连的其他所有设备组成的范围。

**采用集线器扩展以太网**的优缺点如下：

**优点**：使原来属于不同碰撞域（冲突域）的计算机能够跨碰撞域通信。扩大了以太网覆盖的地理范围。

**缺点**：**碰撞域增大了**，总的吞吐量未提高。如果使用不同的以太网技术（如数据率不同），那么就不能用集线器将它们互连起来。

一般情况下，**碰撞域越小越好**。

##### 💡VALN

**虚拟局域网 VLAN** 是由一些局域网网段构成的**与物理位置无关的****逻辑组**，而这些网段具有某些共同的需求。每一个 **VLAN 的帧都有一个明确的标识符**，指明发送这个帧的计算机是属于哪一个 VLAN。

虚拟局域网其实只是局域网给用户提供的**一种服务**，并不是一种新型局域网。**VLAN与物理位置无关**。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416396.png)

上图中同一水平面的属于一个**局域网**，VlAN像是对三个真实局域网的**纵向切割**。

在发送数据的时候，**不同局域网的主机，只接受****相同VLAN中****主机发送的数据帧：**

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416794.png)

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416076.png)

**💡不同VLAN之间不能通信。**

##### 以太网的自学习

此处为语雀内容卡片，点击链接查看：[https://www.yuque.com/7hao/juangou/mw8a7ttq4x7714c1#tUQ89](https://www.yuque.com/7hao/juangou/mw8a7ttq4x7714c1#tUQ89)

##### 数据链路层的三个基本问题

-   **封装成帧**：用于将接收到的比特流划分为若干个数据帧
-   **透明传输**：忽略控制信息中的部分值而不影响数据的正确传输
-   **差错检测**：检测数据传输过程中是否发生错误

# 第四章
### 书后习题详解

**题目4-01** 网络层向上提供的服务有哪两种？试比较其优缺点。

- 面向连接的服务（虚电路服务）,可靠性高,需要额外的开销来建立和维护连接，会增加延迟和网络资源的消耗
- 无连接的服务（数据报服务）,网络开销相对比较低，适合对于实时性要求比较高的服务，但是不能保证数据的可靠性和顺序性。

![image.png](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271508720.png)

**题目4-03**: 作为中间设备，转发器、网桥、路由器和网关有何区别？

- 转发器在物理层使用
- 网桥在数据链路层使用
- 路由器在网络层使用
- 网关在网络层之上使用

**题4-07**：说明IP地址和MAC地址的区别。并说明为什么要使用这两种不同的地址？

 - MAC地址是**数据链路层**和**物理层**使用的地址，是一种物理地址，MAC 地址则放在 MAC 帧的首部；
 - IP地址是**网络层**和以上各层使用的地址，是一种逻辑地址，IP 地址则放在 IP数据报的首部。
 - 使用不同的 MAC 地址。MAC 地址之间的转换非常复杂。IP 编址可以让连接到互联网的主机只需各自拥有一个唯一的 IP 地址，它们之间的通信就像连接在同一个网络上那样简单方便。


**题目4-18**：设某路由器建立了如下转发表

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416157.png)

现共收到5个分组,其目的地址分别为:
- (1)128.96.39.10
- (2)128,96.40.12
- (3)128.96.40.151
- (4)192,4.153.17
- (5)192.4.153.90
试分别计算其下一跳。

> 最长前缀匹配；子网掩码与目的地址按位AND运算
> 或者计算每个地址块对应的IP地址范围

解析：(1)路由器收到的分组的目的地址D1= 128.96.39.10。检查转发表的第2行。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416037.png)

所得结果匹配，故选择下一跳为接口m0。

(2)路由器收到的分组的目的地址D2= 128.96.40.12。检查转发表的第4行。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271416845.png)

所得结果匹配，故选择下一跳为Rz。

(3)路由器收到的分组的目的地址Ds= 128.96.40.151。检查转发表的第4行。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271417788.png)

所得结果匹配，故选择下一跳为R。

(5)路由器收到的分组的目的地址D; = 192.4.153.90。检查转发表的第3行。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271417782.png)

所得结果不匹配。再试其他行，都不匹配。故选择下一跳为默认接口 R4o



**题目4-33**：某单位分配到一个地址块136.23.12.64/26。现在需要进一步划分为4个一样大的子网。试问:
(1)每个子网的网络前缀有多长?
(2)每一个子网中有多少个地址?
(3)每一个子网的地址块是什么?
(4)每一个子网可分配给主机使用的最小地址和最大地址是什么?

(1)原来网络前缀是26位，需要再增加2位，才能划分为4个一样大的子网。因此，每个子网前缀是28位。

(2)每个子网的地址中有4位留给主机用，因此共有16个地址（可用的14个)。

(3)4个子网的地址块分别是:
- 136.23.12.64/28，
- 136.23.12.80/28，
- 136.23.12.96/28，
- 136.23.12.112/28。

(4)地址中的前三个字节分别记为B1，B2和B3。
- 第一个地址块136.23.12.64/28可分配使用的最小地址是136.23.12.65，最大地址是136.23.12.78。
- 第二个地址块136.23.12.80/28可分配使用的最小地址是136.23.12.81，最大地址是136.23.12.94。
- 第三个地址块136.23.12.96/28可分配使用的最小地址是136.23.12.97，最大地址是136.23.12.110。
- 第四个地址块136.23.12.112/28可分配使用的最小地址是136.23.12.113，最大地址是136.23.12.126。

题目：4-47

某单位分配到一个地址块14.24.74.0/24。该单位需要用到三个子网，它们对三个子地址块的具体要求是:子网N需要120个地址，子网N需要60个地址，子网N3需要10个地址。请给出地址块的分配方案。

解析：这个单位的地址块的网络前缀是24位，因此主机号有8位，即一共有256个地址。可以拿总地址的一半(128个）分配给子网N(实际上可以使用的地址数是126个)。这个地址块的网络前缀是25位。

再将剩下地址的一半(64个）分配给子网N(（实际上可以使用的地址数是62个)。这个地址块的网络前缀是26位。

还剩下64个地址，可以拿出1/4（即16个地址）分配给子网N,(实际上可以使用的地址数是14个)。这个地址块的网络前缀是28位。

最后剩下48个地址留给以后再用。

这样，分配给子网N(/25）的首地址是14.24.74.0，末地址是14.24.74.127.

分配给子网N(/26）的首地址是14.24.74.128，末地址是14.24.74.191。

分配给子网N,(/28）的首地址是14.24.74.192，末地址是14.24.74.207.

图T-4-47显示了上述分配方案。

题目：4-65一个路由器连接到三个子网，这三个子网共同的前缀是225.2.17/24。假定子网N要有62台主机，子网Nz要有105台主机，而子网N要有12台主机。试分配这三个子网的前缀。

解析：先分配最大的子网N。105台主机需要的主机号的位数是7位，因此N的前缀是:225.2.17.0/25，其地址范围是225,2.17.0~225.2.17.127。

其次是子网N。62台主机需要的主机号的位数是6位，因此N的前缀是:225.2.17.128/26，其地址范围是225.2.17.128~225.2.17.191。

最小子网是N,。12台主机需要的主机号的位数是3位，因此N,的前缀是:225.2.17.192/28，其地址范围是225.2.17.192~225.2.17.207。

# 第五章

题目：5-1

试说明运输层在协议栈中的地位和作用,运输层的通信和网络层的通信有什么重要的区别?为什么运输层是必不可少的?

解析：从通信和伯息处理的角度看，运箱层向它上面的应用层提供递信服务，它属于面向通信部分的最高层，同时也是用户功能中的最低层。当网络的边缘部分中的两个主机使用网络的核心部分的功能进行端到端的通信时，只有主机的协议栈才有运输层，而网络核心部分中的路由器在转发分组时都只用到下三层的功能。

从网络层来说，通信的两端是两个主机。P数据报的首部明确地标识了这两个主机的IP地址。但“两个主机之间的通信”这种说法还不够清楚。这是因为，真正进行通信的实体是主机中的进程，是这个主机中的一个进程和另一个主机中的一个进程在交换数据（即通信)，因此严格地讲，两个主机进行通信就是两个主机中的应用进程互相通信。I协议虽然能把分组送到目的主机，但是这个分组还停留在主机的网络层而没有交付主机中的应用进程,从运输层的角度看，通信的真正端点并不是主机而是主机中的进程。也就是说，端到端的通信是应用进程之间的通信〔见图T-5-01)。因此，运输层是不可缺少的。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271417198.png)

运输层的通信和网络层的通信有很大的区别。网络层提供主机之间的逻辑通信，而运输层则提供应用进程之间的逻辑通信。

运输层还有复用、分用的功能,还要对收到的报文进行差错检测。

题目：5-3

当应用程序使用面向连接的TCP和无连接的P时，这种传输是面向连接的还是无连接的?

解析：这要在不同层次来看。在运输层是面向连接的，而在网络层则是无连接的。

题目：5-9

端口的作用是什么?为什么端口号要划分为三种?

解析：端口是应用层的各种协议进程与运输实体进行层间交互的地点。

不同的系统，具体实现端口的方法可以是不同的（取决于系统使用的操作系统)。TCP/IP的运输层用一个16位端口号来标志一个端口。但端口号只具有本地意义，它只是为了标志本计算机应用层中的各个进程在和运输层交互时的层间接口。在互联网中不同的计算机中，相同的端口号是没有关联的。这种在协议栈层间的抽象的协议端口是软件端口，和路由器或交换机上的硬件端口是完全不同的概念。硬件端口是不同硬件设备进行交互的接口，而软件端口是应用层的各种协议进程与运输实体进行层间交互的一种地址。

两个计算机中的进程要互相通信,不仅必须知道对方的P地址(为了找到对方的计算机)，而且还要知道对方的端口号(为了找到对方计算机中的应用进程)。

端口号有三种。不同的端口号有其特殊的用途。例如，客户端是通信的发起方，而服务器是服务的提供方。它们对端口的使用要求是不同的。这三种端口号是:

(1)熟知端口号或系统端口号，数值为0~1023。这些数值可在网址 www.iana.org 查到。IANA把这些端口号指派给了TCP/IP最重要的一些应用程序，让所有的用户都知道。

(2)登记端口号,数值为1024~49151.这种端口号是为没有熟知端口号的应用程序使用的。使用这种端口号必须按照IANA规定的手续登记，以防止重复。

上面两种端口号是服务器端使用的端口号。下面的-一种是客户端使用的端口号。

(3)短暂端口号，数值为49152-65535。这种端口号仅在客户进程运行时才动态选择，是留给客户进程暂时使用的。

题目：5-13

一个UDP用户数据报的数据字段为8192字节。在链路层要使用以太网来传送。试问应当划分为几个P数据报片?说明每一个IP数据报片的数据字段长度和片偏移字段的值。

解析：UDP用户数据报的长度=8192+8= 8200 B

以太网数据字段最大长度是1500 B。若IP首部为20 B，则P数据报的数据部分最多只能有1480 B。8200= 1480 x 5+ 800，因此划分的数据报片共6个。

数据字段的长度:前5个是1480字节，最后一个是800字节。

第1个数据报片的片偏移字节是0。

第2个数据报片的片偏移字节是1480 B。

第3个数据报片的片偏移字节是1480 ×2= 2960 B。

第4个数据报片的片偏移字节是1480 × 3 =4440 B。

第5个数据报片的片偏移字节是1480× 4 = 5920 B。

第6个数据报片的片偏移字节是1480 x 5= 7400 B.

图T-5-13给出了以上结果。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271417372.png)

把以上得出的片偏移字节数除以8，就得出片偏移字段中应当写入的数值。因此片偏移字段的值分别是:0，185，370，555，740和925(字节数除以8)。

题目：5-18

假定在运输层使用停止等待协议。发送方在发送报文段M后在设定的时间内未收到确认，于是重传M，但M又迟迟不能到达接收方。不久，发送方收到了迟到的对M的确认，于是发送下一个报文段M，不久就收到了对M的确认。接着发送方发送新的报文段M，但这个新的M在传送过程中丢失了。正巧，一开始就滞留在网络中的M现在到达接收方。接收方无法分辨出M是旧的。于是收下M，并发送确认。显然，接收方后来收到的M是重复的，协议失败了。

试画出双方交换报文段的过程。

解析：双方交换报文段的过程如图T-5-18所示。

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202306271417483.png)

我们可以看出，旧的 M被当成了新的M!可见运输层不能使用停止等待协议（编号只有0和1两种)。

题目：5-23

主机A向主机B连续发送了两个TCP报文段，其序号分别是70和100。试问:(1)第一个报文段携带了多少字节的数据?

(2)主机B收到第一个报文段后发回的确认中的确认号应当是多少?

(3)如果B收到第二个报文段后发回的确认中的确认号是i80，试问A发送的第二个报文段中的数据有多少字节?

(4)如果A发送的第一个报文段丢失了，但第二个报文段到达了B。B在第二个报文段到达后向A发送确认。试问这个确认号应为多少?

解析：分别求解如下:

(1)第一个报文段的数据序号是70到99，共30字节的数据。

(2)B期望收到下一个报文段的第一个数据字节的序号是100，因此确认号应为100.(3)A发送的第二个报文段中的数据的字节数是180 - 100 =80字节。

(4)B在第二个报文段到达后向A发送确认，其确认号应为70。

---




---

# 参考

[https://blog.csdn.net/qq_51344334/category_10700545.html](https://blog.csdn.net/qq_51344334/category_10700545.html)