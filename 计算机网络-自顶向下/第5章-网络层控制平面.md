## 导论
**本章目标：理解网络层控制平面的工作原理**
- 传统路由选择算法
- SDN控制器
- ICMP：Internet Control Message Protocol
- 网络管理
- 在互联网上的实例和实现：OSPF，BGP，OpenFlow，ODL和ONOS控制器

**网络层功能**
- 转发：将分组从路由器的一个输入输出端口移到合适的输出端口，数据平面
- 路由：确定分组从源到目标的路径，控制平面

2种构建网络层控制平面功能的方法：
- 每个路由器控制功能实现（传统）
- 逻辑上集中的控制功能实现SDN

## 5.1 路由选择算法
### 路由的概念
路由route：按照某种指标（传输延迟，经过的站点数目等）找到一条从源节点到目标节点的较好路径
- 较好路径：按照某种指标较小的路径
- 指标：战数，延迟，费用，队列长度等，反映了网络使用者希望网络在什么方面表现突出

以网络为单位进行路由，路由信息通告+路由计算
- 网络以单位进行路由，路由信息传输，计算和匹配的代价低
- 前提条件是：一个网络所有节点地址前缀相同，且物理上聚集

网络到网络的路由=路由器-路由器之间路由
- 网络对应的路由器到其他网络对应的路由器的路由
- 在一个网络中，路由器-主机之间的通信，链路层解决

### 网络的图
网络的图抽象
![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301021948054.png)

![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301022040140.png)

**最优化原则(optimality principle)**：汇集树（sink tree），此节点到所有其他节点的最优路径形成的树，路由选择算法就是为所有路由器找到并使用汇集树

路由选择算法的原则：
- 正确性(correctness)：算法必须是**正确的和完整**的，使分组一站一站接力，正确发向目标站；完整：目标所有的站地址，在路由表中都能找到相应的表项；没有处理不了的目标站地址:
- 简单性(simplicify)：算法在计算机上应简单：最优但复杂的算法，时间上延迟很大，不实用，不应为了获取路由信息增加很多的通信量:
- 建壮性(robustness)：算法应能适应通信量和网络拓扑的变化：通信量变化，网络拓扑的变化算法能很快适应；不向很拥挤的链路发数据，不向断了的链路发送数据:
- 稳定性(stability)：产生的路由不应该摇摆
- 公平性(fairness)：对每一个站点都公平
- 最优性(opfimality)：某一个指标的最优，时间上，费用上，等指标，或综合指标；实际上，获取最优的结果代价较高，可以是次优的


路由算法分类
![](https://ypic.oss-cn-hangzhou.aliyuncs.com/202301022050198.png)


## link state
